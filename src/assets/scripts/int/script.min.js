function initComponents(){const e=$(".js-import"),t=$("#js-path").val();for(let n=0;n<e.length;n++){const i=$(e[n]),o=i.data("import");$.get(`${t}/${o}.html`,{_:$.now()}).done(e=>{let n=$(e);const o=t.split("/");if(o.length>1){let e="";o.forEach(t=>e+=".."===t?"../":""),n=replaceNestedLinks(n,e,"src"),n=replaceNestedLinks(n,e,"href")}i.replaceWith(n)})}}function initDefaultEvents(){formSubmitA(),formSubmitB(),clearInput(),txtPrevent(),numPrevent(),toggleSwitcher(),toggleNav(),scrollToSection()}function replaceNestedLinks(e,t,n){const i=e.find(`[${n}]`);if(i.length>0)for(let e=0;e<i.length;e++){const o=$(i[e]),a=o.attr(n).split("https://").length>1||o.attr(n).split("http://").length>1,s=!1!==o.data("replace");if(!a&&s){const e=t+o.attr(n);o.attr(n,"..//"===e?"../":e)}}return e}function formSubmitA(){$(".js-form-submit-a").on("click tap",function(e){validateFields()?validatePhone()?($(this).attr("disabled","disabled"),$(".form").submit()):(e.preventDefault(),$('input[name="phoneCountryCode"], input[name="phoneNumber"]').addClass("error")):e.preventDefault()})}function formSubmitB(){$(".js-form-submit-b").on("click tap",function(e){e.preventDefault();const t=$(this).parents("form");validateFields()&&(validatePhone()?($(this).attr("disabled","disabled"),sendEmail(()=>t.submit())):(e.preventDefault(),$('input[name="phoneCountryCode"], input[name="phoneNumber"]').addClass("error"))),console.log(validatePhone())})}function initFields(){$(".js-url-link").attr("type","text").val(window.location.href).attr("type","hidden")}function clearInput(){$("form input").on("focus change",function(){$(this).removeClass("error warning")})}function txtPrevent(){$(document).on("keypress",".js-text",function(e){const t=e.key;t>=0&&t<=9&&e.preventDefault()})}function numPrevent(){$(document).on("keypress",".js-numbers",function(e){const t=e.key,n=t>=0&&t<=9,i=($(this).data("allow")||"").split(",").includes(t);n||i||e.preventDefault()})}function sendEmail(e){const t=$('input[name="email"]').val(),n=$('input[name="firstName"]').val(),i=$('input[name="lastName"]').val(),o=$("html").attr("lang"),a=`../public/email/send.php?email=${t}&name=${n}&surname=${i}&language=${o}`;$.ajax({url:a}).done(function(){e()}),console.log(o)}function validateFields(){const e=$("form").find("[required]");let t=!0;const n=[];for(let i=0;i<e.length;i++){const o=$(e[i]),a=o.attr("type"),s=o.val();switch(a){case"email":t=isEmail(s);break;case"checkbox":t=isChecked(o);break;default:t=isLength(s)}n.push(t),t?o.removeClass("error"):o.addClass("error")}return!n.includes(!1)}function isLength(e){return e.length>1}function isEmail(e){const t=new RegExp("[a-zA-Z0-9]+@[a-zA-Z]+.[a-z]{2,3}");return console.log(t.test(e)),t.test(e)}function isChecked(e){return e.is(":checked")}function toggleSwitcher(){$(document).on("click tap",".js-switcher",function(e){e.preventDefault();const t=$("html").attr("lang"),n=$(this).attr("href").replace("/",""),i=window.location.href.split(`/${t}/`),o=`${i[0]}/${n}/${i[1]}`;n!==t&&(window.location.href=o)})}function toggleNav(){$(document).on("click tap",".js-toggle-nav",function(){$(".js-toggle-nav, #nav").toggleClass("active")})}function scrollToSection(){$(".js-anchor-link").click(function(e){e.preventDefault();const t=$(this).attr("href"),n=$(".header").height();if(document.getElementsByClassName("section-links")){const e=$(".section-links").height(),i=$(t).offset().top-(n+e);$("html, body").animate({scrollTop:i},500)}$(".js-toggle-nav, #nav").removeClass("active")})}function getSession(){return $.ajax({url:"https://api.imediafile.com/phoneVerification/?initialization=true",async:!1,type:"GET",complete:e=>e.responseJSON.response}).responseJSON.response}function isPhoneCorrect(e){const t=getSession();return $.ajax({url:`https://api.imediafile.com/phoneVerification/?session=${t}&phoneNumber=${e}`,async:!1,type:"GET",complete:e=>e.responseJSON.is_phone_valid}).responseJSON.is_phone_valid}function validatePhone(){const e=$('input[name="phoneCountryCode"]').val(),t=$('input[name="phoneNumber"]').val();return"true"===isPhoneCorrect(e.replace("+","")+t)}$(()=>{initComponents(),initDefaultEvents(),initFields()});